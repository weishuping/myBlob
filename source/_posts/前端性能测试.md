---
title: 前端性能测试
date: 2020-02-15 16:56:42
tags: ['前端性能']
---

对于web应用来说，除了考虑服务端在一定时间内返回页面数据之外，还可以从页面前端的角度来考虑性能测试和调优。

#### 前端性能测试目的
计算出包含页面渲染、网络传输以及服务器解析等元素在内的加载时间指标，对该页面性能进行评估分析。做出一定优化和解决方案，从而提升用户体验。

#### 前端性能测试对象
HTML、CSS、JS、AJAX等Web页面，服务器数据返回、网络传输、页面渲染。
#### 前端性能检测指标
白屏时间、首屏时间、用户可交互时间、总下载时间、DNS解析时间、TCP连接时间、HTTP请求时间、HTTP响应时间
#### 性能检测工具
1、 YSlow
Yslow(why slow)是雅虎基于网站优化规则推出的工具，可以帮助分析并优化网站性能。（减少http请求数、GZip压缩、样式放在上面、js放底部、减少DND查询等）
2、PageSpeed
PageSpeed是由Google内部来改进网页设计的工具，它整合在Firefox的Firebug插件中。
3、Chrome DevTools - Performance

#### pageSpeed分析基于一个分为5类的最佳实践列表
* 优化缓存-让应用的数据和逻辑完全避免使用网络
* 减少回应时间-减少一连串的请求-响应周期的数量
* 减少请求大小-减少上传大小
* 减少有效负荷大小-减少响应、下载和缓存页面的大小
* 优化浏览器渲染-改善浏览器的页面布局
#### 最佳做法
一：排定资源优先级
二：尽可能减少浏览器重排
重排是用于重新计算文档中各元素的位置和几何形状，以便重新呈现该文档的部分内部和全部内容。由于重排**会组织用户**在浏览器中执行操作，因此需要优化。
引发重排的操作：浏览器窗口的变化、使用设计计算出的样式的js方法、在dom中添加或者移除元素、更改某个元素的类等等。
简单的准则：
1、减少不必要的dom深度。
2、尽可能减少css规则的数量，并移除未使用的css规则。
3、如果进行复杂的渲染更改，在流程外执行。可使用position-absolute或者fixed来做。
4、避免使用不必要且复杂的css选择器（尤其是后代选择器），因为此类需消耗更多的CPU处理能力。

#### 参考资料
[PageSpeed Tools](https://developers.google.cn/speed/docs/insights/browser-reflow?hl=zh_cn)
[资源优先级](https://developers.google.cn/web/fundamentals/performance/resource-prioritization?hl=zh_cn)

